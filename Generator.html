<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur d'Exercices - √âtude de Fonctions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1a237e 0%, #303f9f 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .controls {
            padding: 30px;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .control-group select,
        .control-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .control-group select:focus,
        .control-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .control-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-export {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
        }
        
        .btn-clear {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-clear:hover {
            background: #d0d0d0;
        }
        
        .content {
            padding: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .problems-container {
            display: grid;
            gap: 20px;
        }
        
        .problem-card {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
        }
        
        .problem-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.1);
        }
        
        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .problem-number {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }
        
        .problem-type {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .problem-difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .difficulty-facile {
            background: #4caf50;
            color: white;
        }
        
        .difficulty-moyen {
            background: #ff9800;
            color: white;
        }
        
        .difficulty-difficile {
            background: #f44336;
            color: white;
        }
        
        .problem-content {
            font-size: 1.1em;
            line-height: 1.8;
            color: #333;
        }
        
        .function-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            border-left: 4px solid #667eea;
            font-weight: bold;
        }
        
        .problem-questions {
            margin-top: 20px;
        }
        
        .question-item {
            margin-bottom: 12px;
            padding-left: 20px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 2px solid #ddd;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .controls, .button-group, .stats, .footer {
                display: none;
            }
            
            .container {
                box-shadow: none;
            }
            
            .problem-card {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì G√©n√©rateur d'Exercices</h1>
            <p>√âtude de Fonctions - Niveau Baccalaur√©at (Tunisie & Maroc)</p>
        </div>
        
        <div class="controls">
            <div class="control-row">
                <div class="control-group">
                    <label for="problemType">Type d'exercice</label>
                    <select id="problemType">
                        <option value="all">Tous les types</option>
                        <option value="limits">Calcul de limites</option>
                        <option value="continuity">Continuit√©</option>
                        <option value="derivative">D√©rivabilit√©</option>
                        <option value="variations">√âtude de variations</option>
                        <option value="asymptotes">Asymptotes</option>
                        <option value="logarithm">Fonctions logarithmes</option>
                        <option value="exponential">Fonctions exponentielles</option>
                        <option value="rational">Fonctions rationnelles</option>
                        <option value="complete">√âtude compl√®te</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="difficulty">Niveau de difficult√©</label>
                    <select id="difficulty">
                        <option value="all">Tous les niveaux</option>
                        <option value="facile">Facile (Premi√®re/Bac 1)</option>
                        <option value="moyen">Moyen (Terminale/Bac 2)</option>
                        <option value="difficile">Difficile (Examen)</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="quantity">Nombre d'exercices</label>
                    <input type="number" id="quantity" min="1" max="50" value="5">
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn-generate" onclick="generateProblems()">
                    ‚ú® G√©n√©rer des exercices
                </button>
                <button class="btn-export" onclick="exportToPDF()">
                    üìÑ Exporter en PDF
                </button>
                <button class="btn-clear" onclick="clearProblems()">
                    üóëÔ∏è Effacer
                </button>
            </div>
        </div>
        
        <div class="content">
            <div class="stats" id="stats" style="display: none;">
                <div class="stat-card">
                    <div class="stat-number" id="totalProblems">0</div>
                    <div class="stat-label">Exercices g√©n√©r√©s</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgDifficulty">-</div>
                    <div class="stat-label">Difficult√© moyenne</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="typeCount">-</div>
                    <div class="stat-label">Types diff√©rents</div>
                </div>
            </div>
            
            <div class="problems-container" id="problemsContainer">
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <h3>Aucun exercice g√©n√©r√©</h3>
                    <p>Cliquez sur "G√©n√©rer des exercices" pour commencer</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>G√©n√©rateur d'exercices bas√© sur les programmes tunisien et marocain | ¬© 2025</p>
        </div>
    </div>

    <script>
        // Problem generation engine
        const problemGenerators = {
            limits: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        const b = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = ${a}x + ${b}`,
                            questions: [
                                `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                `Calculer lim<sub>x‚Üí-‚àû</sub> f(x)`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        const b = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = (x¬≤ - ${a*a})/(x - ${a})`,
                            questions: [
                                `Calculer lim<sub>x‚Üí${a}</sub> f(x)`,
                                `Simplifier f(x) pour x ‚â† ${a}`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = sin(x)/x`,
                            questions: [
                                `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                `Que repr√©sente cette limite remarquable ?`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = (‚àö(x¬≤ + ${a}x) - x)`,
                            questions: [
                                `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                `Lever l'ind√©termination en factorisant par l'expression conjugu√©e`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = (e<sup>x</sup> - 1)/x`,
                            questions: [
                                `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                `Comparer avec la limite remarquable`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = x¬∑ln(x)`,
                            questions: [
                                `Calculer lim<sub>x‚Üí0<sup>+</sup></sub> f(x)`,
                                `Lever l'ind√©termination`,
                                `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "Calcul de limite",
                            function: `f(x) = (1 - cos(x))/x¬≤`,
                            questions: [
                                `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                `Utiliser la limite remarquable et l'identit√© trigonom√©trique`,
                                `V√©rifier le r√©sultat avec la r√®gle de L'H√¥pital`
                            ]
                        };
                    },
                    () => {
                        const n = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "Calcul de limite - Croissances compar√©es",
                            function: `f(x) = x<sup>${n}</sup>¬∑e<sup>-x</sup>`,
                            questions: [
                                `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                `Appliquer le th√©or√®me des croissances compar√©es`,
                                `Interpr√©ter le r√©sultat graphiquement`
                            ]
                        };
                    }
                ]
            },
            
            continuity: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Continuit√©",
                            function: `f(x) = x¬≤ + ${a}`,
                            questions: [
                                `Montrer que f est continue sur ‚Ñù`,
                                `Justifier par les th√©or√®mes sur la continuit√©`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Continuit√©",
                            function: `f(x) = |x - ${a}|`,
                            questions: [
                                `√âtudier la continuit√© de f sur ‚Ñù`,
                                `f est-elle continue en x = ${a} ?`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "Continuit√© et TVI",
                            function: `f(x) = x¬≥ - ${a}x - ${a}`,
                            questions: [
                                `Montrer que f est continue sur ‚Ñù`,
                                `Calculer f(0) et f(${a+1})`,
                                `Montrer que l'√©quation f(x) = 0 admet au moins une solution dans ]0, ${a+1}[`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        const k = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Continuit√© par morceaux",
                            function: `f(x) = { x¬≤ si x < ${a}, ax + b si x ‚â• ${a} }`,
                            questions: [
                                `Pour quelles valeurs de a et b, f est-elle continue en x = ${a} ?`,
                                `D√©terminer l'ensemble des couples (a, b) solutions`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "Continuit√© et fonction compos√©e",
                            function: `f(x) = { x¬∑sin(1/x) si x ‚â† 0, 0 si x = 0 }`,
                            questions: [
                                `Montrer que f est continue en 0`,
                                `Utiliser l'encadrement -|x| ‚â§ x¬∑sin(1/x) ‚â§ |x|`,
                                `Appliquer le th√©or√®me des gendarmes`
                            ]
                        };
                    }
                ]
            },
            
            derivative: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        const b = Math.floor(Math.random() * 5) + 1;
                        const c = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "D√©riv√©e",
                            function: `f(x) = ${a}x¬≥ + ${b}x¬≤ + ${c}x`,
                            questions: [
                                `Calculer f'(x)`,
                                `Calculer f'(0) et f'(1)`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        const b = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "D√©riv√©e et tangente",
                            function: `f(x) = ${a}x¬≤ + ${b}`,
                            questions: [
                                `Calculer f'(x)`,
                                `D√©terminer l'√©quation de la tangente au point d'abscisse 1`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "D√©riv√©e - Fonction compos√©e",
                            function: `f(x) = ln(x¬≤ + ${a})`,
                            questions: [
                                `Calculer f'(x)`,
                                `Simplifier l'expression`,
                                `√âtudier le signe de f'(x)`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "D√©riv√©e - Produit",
                            function: `f(x) = x¬≤¬∑e<sup>-x</sup>`,
                            questions: [
                                `Calculer f'(x) en utilisant la formule (uv)' = u'v + uv'`,
                                `Factoriser f'(x)`,
                                `R√©soudre f'(x) = 0`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "D√©riv√©e - Quotient",
                            function: `f(x) = (x¬≤ + 1)/(x¬≤ - 1)`,
                            questions: [
                                `D√©terminer le domaine de d√©finition de f`,
                                `Calculer f'(x) en utilisant la formule (u/v)'`,
                                `Montrer que f'(x) = -4x/(x¬≤ - 1)¬≤`,
                                `Dresser le tableau de variations de f`
                            ]
                        };
                    }
                ]
            },
            
            variations: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "√âtude de variations",
                            function: `f(x) = -x¬≤ + ${a}x`,
                            questions: [
                                `Calculer f'(x)`,
                                `√âtudier le signe de f'(x)`,
                                `Dresser le tableau de variations de f`,
                                `D√©terminer les extremums`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 4) + 1;
                        return {
                            type: "√âtude de variations",
                            function: `f(x) = x¬≥ - ${3*a}x¬≤ + ${3*a*a}x`,
                            questions: [
                                `Calculer f'(x) et factoriser`,
                                `R√©soudre f'(x) = 0`,
                                `√âtudier le signe de f'(x)`,
                                `Dresser le tableau de variations`,
                                `D√©terminer les extremums locaux`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "√âtude de variations",
                            function: `f(x) = x - ln(x) sur ]0, +‚àû[`,
                            questions: [
                                `Calculer f'(x)`,
                                `Montrer que f'(x) = (x - 1)/x`,
                                `√âtudier le signe de f'(x)`,
                                `Dresser le tableau de variations`,
                                `En d√©duire que f(x) ‚â• 1 pour tout x > 0`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "√âtude de variations - Fonction auxiliaire",
                            function: `f(x) = x¬≤ - 2x¬∑ln(x) sur ]0, +‚àû[`,
                            questions: [
                                `Calculer f'(x)`,
                                `Montrer que f'(x) = 2(x - ln(x) - 1)`,
                                `Poser g(x) = x - ln(x) - 1 et √©tudier les variations de g`,
                                `Montrer que g(x) = 0 admet une unique solution Œ± ‚àà ]1, 2[`,
                                `En d√©duire le signe de f'(x) et dresser le tableau de variations de f`
                            ]
                        };
                    }
                ]
            },
            
            asymptotes: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        return {
                            type: "Asymptotes",
                            function: `f(x) = ${a}/x`,
                            questions: [
                                `D√©terminer le domaine de d√©finition`,
                                `Calculer lim<sub>x‚Üí0<sup>+</sup></sub> f(x) et lim<sub>x‚Üí0<sup>-</sup></sub> f(x)`,
                                `En d√©duire l'asymptote verticale`,
                                `Calculer lim<sub>x‚Üí¬±‚àû</sub> f(x) et d√©terminer l'asymptote horizontale`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "Asymptotes obliques",
                            function: `f(x) = x + ${a}/x`,
                            questions: [
                                `Calculer lim<sub>x‚Üí¬±‚àû</sub> [f(x) - x]`,
                                `Montrer que y = x est asymptote oblique en ¬±‚àû`,
                                `√âtudier la position de (C<sub>f</sub>) par rapport √† cette asymptote`,
                                `Tracer les asymptotes et la courbe`
                            ]
                        };
                    },
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        const b = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "Asymptotes",
                            function: `f(x) = (x¬≤ + ${a})/(x + ${b})`,
                            questions: [
                                `D√©terminer les asymptotes verticales`,
                                `Effectuer la division euclidienne`,
                                `D√©terminer l'asymptote oblique`,
                                `Calculer f(x) - (ax + b) et √©tudier son signe`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "Asymptotes - Fonction exponentielle",
                            function: `f(x) = x + e<sup>-x</sup>`,
                            questions: [
                                `Calculer lim<sub>x‚Üí+‚àû</sub> f(x) et lim<sub>x‚Üí-‚àû</sub> f(x)`,
                                `Montrer que y = x est asymptote oblique en +‚àû`,
                                `Y a-t-il une asymptote en -‚àû ? Justifier`,
                                `√âtudier la position relative de (C<sub>f</sub>) par rapport √† (D): y = x`
                            ]
                        };
                    }
                ]
            },
            
            logarithm: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 2;
                        return {
                            type: "Fonction logarithme",
                            function: `√âquation: ln(x) = ${a}`,
                            questions: [
                                `R√©soudre l'√©quation`,
                                `Donner la solution exacte et une valeur approch√©e`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 2;
                        return {
                            type: "Fonction logarithme",
                            function: `√âquation: ln(x) + ln(x - 1) = ln(${a})`,
                            questions: [
                                `D√©terminer le domaine de d√©finition`,
                                `Simplifier en utilisant les propri√©t√©s du logarithme`,
                                `R√©soudre l'√©quation`,
                                `V√©rifier la solution`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "Fonction logarithme - In√©quation",
                            function: `In√©quation: ln(x - 2) > ln(5 - x)`,
                            questions: [
                                `D√©terminer le domaine de validit√©`,
                                `R√©soudre l'in√©quation`,
                                `Donner l'ensemble solution`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "√âtude de fonction logarithmique",
                            function: `f(x) = x - 1 - ln(x) sur ]0, +‚àû[`,
                            questions: [
                                `Calculer les limites aux bornes`,
                                `Calculer f'(x) et √©tudier son signe`,
                                `Dresser le tableau de variations`,
                                `En d√©duire que ‚àÄx > 0, ln(x) ‚â§ x - 1`,
                                `Montrer l'√©galit√© si et seulement si x = 1`
                            ]
                        };
                    }
                ]
            },
            
            exponential: {
                facile: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "Fonction exponentielle",
                            function: `√âquation: e<sup>x</sup> = ${a}`,
                            questions: [
                                `R√©soudre l'√©quation`,
                                `Exprimer la solution avec ln`
                            ]
                        };
                    }
                ],
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 1;
                        const b = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "Fonction exponentielle",
                            function: `√âquation: e<sup>2x</sup> - ${a}e<sup>x</sup> + ${b} = 0`,
                            questions: [
                                `Poser X = e<sup>x</sup>`,
                                `R√©soudre l'√©quation du second degr√© en X`,
                                `En d√©duire les solutions en x`,
                                `V√©rifier les solutions`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "Fonction exponentielle - In√©quation",
                            function: `In√©quation: e<sup>x</sup> > e<sup>2x-3</sup>`,
                            questions: [
                                `Utiliser la croissance de la fonction exponentielle`,
                                `R√©soudre l'in√©quation`,
                                `Donner l'ensemble solution`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "√âtude compl√®te - Fonction exponentielle",
                            function: `f(x) = (x¬≤ + 1)¬∑e<sup>-x</sup>`,
                            questions: [
                                `Calculer lim<sub>x‚Üí-‚àû</sub> f(x) et lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                `Montrer que f'(x) = (-x¬≤ + 2x - 1)¬∑e<sup>-x</sup>`,
                                `Factoriser f'(x) sous la forme -(x - 1)¬≤¬∑e<sup>-x</sup>`,
                                `Dresser le tableau de variations`,
                                `D√©terminer le maximum de f`,
                                `Tracer la courbe avec ses asymptotes`
                            ]
                        };
                    }
                ]
            },
            
            rational: {
                moyen: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 1;
                        return {
                            type: "Fonction rationnelle",
                            function: `f(x) = (x¬≤ - ${a})/(x + ${a})`,
                            questions: [
                                `D√©terminer le domaine de d√©finition`,
                                `Calculer les limites aux bornes`,
                                `Calculer f'(x)`,
                                `√âtudier les variations de f`,
                                `D√©terminer les asymptotes`
                            ]
                        };
                    }
                ],
                difficile: [
                    () => {
                        return {
                            type: "Fonction homographique",
                            function: `f(x) = (2x + 3)/(x - 1)`,
                            questions: [
                                `Montrer que f(x) = 2 + 5/(x - 1)`,
                                `√âtudier les variations de f`,
                                `Montrer que f est une bijection de ‚Ñù\\{1} vers ‚Ñù\\{2}`,
                                `D√©terminer la fonction r√©ciproque f<sup>-1</sup>`,
                                `Tracer (C<sub>f</sub>) et (C<sub>f<sup>-1</sup></sub>) dans le m√™me rep√®re`
                            ]
                        };
                    }
                ]
            },
            
            complete: {
                difficile: [
                    () => {
                        const a = Math.floor(Math.random() * 3) + 2;
                        return {
                            type: "√âtude compl√®te",
                            function: `f(x) = x¬≥/(x¬≤ - ${a})`,
                            questions: [
                                `<b>Partie A - Domaine et limites</b>`,
                                `1) D√©terminer D<sub>f</sub>`,
                                `2) Calculer lim<sub>x‚Üí¬±‚àö${a}</sub> f(x)`,
                                `3) Calculer lim<sub>x‚Üí¬±‚àû</sub> f(x)`,
                                `<b>Partie B - Asymptotes</b>`,
                                `1) D√©terminer les asymptotes verticales`,
                                `2) Montrer que lim<sub>x‚Üí¬±‚àû</sub> [f(x) - x] = 0`,
                                `3) En d√©duire l'asymptote oblique`,
                                `<b>Partie C - Variations</b>`,
                                `1) Calculer f'(x)`,
                                `2) √âtudier le signe de f'(x)`,
                                `3) Dresser le tableau de variations complet`,
                                `<b>Partie D - Courbe</b>`,
                                `1) Tracer les asymptotes`,
                                `2) Construire (C<sub>f</sub>)`
                            ]
                        };
                    },
                    () => {
                        return {
                            type: "√âtude compl√®te avec fonction auxiliaire",
                            function: `f(x) = x¬≤ - 2x¬∑ln(x) sur ]0, +‚àû[`,
                            questions: [
                                `<b>Partie A - Limites</b>`,
                                `1) Montrer que lim<sub>x‚Üí0<sup>+</sup></sub> x¬∑ln(x) = 0`,
                                `2) En d√©duire lim<sub>x‚Üí0<sup>+</sup></sub> f(x)`,
                                `3) Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                `<b>Partie B - Fonction auxiliaire</b>`,
                                `1) Montrer que f'(x) = 2(x - ln(x) - 1)`,
                                `2) Poser g(x) = x - ln(x) - 1 et √©tudier g`,
                                `3) Montrer que g(x) = 0 admet une unique solution Œ± ‚àà ]1, 2[`,
                                `<b>Partie C - √âtude de f</b>`,
                                `1) Dresser le tableau de variations de f`,
                                `2) Montrer que f(Œ±) < 0`,
                                `3) Tracer la courbe (C<sub>f</sub>)`
                            ]
                        };
                    }
                ]
            }
        };

        let generatedProblems = [];
        let problemCounter = 1;

        function generateProblems() {
            const type = document.getElementById('problemType').value;
            const difficulty = document.getElementById('difficulty').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            
            generatedProblems = [];
            problemCounter = 1;
            
            for (let i = 0; i < quantity; i++) {
                const problem = generateSingleProblem(type, difficulty);
                if (problem) {
                    generatedProblems.push(problem);
                }
            }
            
            displayProblems();
            updateStats();
        }

        function generateSingleProblem(type, difficulty) {
            let selectedType = type === 'all' ? getRandomType() : type;
            let selectedDifficulty = difficulty === 'all' ? getRandomDifficulty() : difficulty;
            
            const generators = problemGenerators[selectedType];
            if (!generators || !generators[selectedDifficulty]) {
                selectedDifficulty = 'moyen';
            }
            
            const availableGenerators = generators[selectedDifficulty];
            if (!availableGenerators || availableGenerators.length === 0) {
                return null;
            }
            
            const generator = availableGenerators[Math.floor(Math.random() * availableGenerators.length)];
            const problemData = generator();
            
            return {
                number: problemCounter++,
                type: problemData.type,
                difficulty: selectedDifficulty,
                function: problemData.function,
                questions: problemData.questions
            };
        }

        function getRandomType() {
            const types = Object.keys(problemGenerators);
            return types[Math.floor(Math.random() * types.length)];
        }

        function getRandomDifficulty() {
            const difficulties = ['facile', 'moyen', 'difficile'];
            const weights = [0.3, 0.5, 0.2]; // 30% facile, 50% moyen, 20% difficile
            const random = Math.random();
            let sum = 0;
            for (let i = 0; i < weights.length; i++) {
                sum += weights[i];
                if (random < sum) return difficulties[i];
            }
            return 'moyen';
        }

        function displayProblems() {
            const container = document.getElementById('problemsContainer');
            
            if (generatedProblems.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <h3>Aucun exercice g√©n√©r√©</h3>
                        <p>Cliquez sur "G√©n√©rer des exercices" pour commencer</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = generatedProblems.map(problem => `
                <div class="problem-card">
                    <div class="problem-header">
                        <div>
                            <span class="problem-number">Exercice ${problem.number}</span>
                            <span class="problem-difficulty difficulty-${problem.difficulty}">
                                ${problem.difficulty.charAt(0).toUpperCase() + problem.difficulty.slice(1)}
                            </span>
                        </div>
                        <span class="problem-type">${problem.type}</span>
                    </div>
                    <div class="problem-content">
                        <div class="function-display">${problem.function}</div>
                        <div class="problem-questions">
                            ${problem.questions.map((q, i) => `
                                <div class="question-item"><b>${i + 1})</b> ${q}</div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const statsDiv = document.getElementById('stats');
            
            if (generatedProblems.length === 0) {
                statsDiv.style.display = 'none';
                return;
            }
            
            statsDiv.style.display = 'grid';
            
            // Total problems
            document.getElementById('totalProblems').textContent = generatedProblems.length;
            
            // Average difficulty
            const difficultyValues = { facile: 1, moyen: 2, difficile: 3 };
            const avgDiff = generatedProblems.reduce((sum, p) => sum + difficultyValues[p.difficulty], 0) / generatedProblems.length;
            const avgDiffText = avgDiff < 1.5 ? 'Facile' : avgDiff < 2.5 ? 'Moyen' : 'Difficile';
            document.getElementById('avgDifficulty').textContent = avgDiffText;
            
            // Unique types
            const uniqueTypes = new Set(generatedProblems.map(p => p.type));
            document.getElementById('typeCount').textContent = uniqueTypes.size;
        }

        function clearProblems() {
            if (generatedProblems.length === 0) return;
            
            if (confirm('√ätes-vous s√ªr de vouloir effacer tous les exercices g√©n√©r√©s ?')) {
                generatedProblems = [];
                problemCounter = 1;
                displayProblems();
                updateStats();
            }
        }

        function exportToPDF() {
            if (generatedProblems.length === 0) {
                alert('Aucun exercice √† exporter. G√©n√©rez d\'abord des exercices.');
                return;
            }
            
            window.print();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            displayProblems();
        });
    </script>
</body>
</html>