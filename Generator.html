<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur d'Exercices - √âtude de Fonctions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1a237e 0%, #303f9f 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .controls {
            padding: 30px;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .control-group select,
        .control-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .control-group select:focus,
        .control-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .control-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }
        
        .help-text {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-export {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
        }
        
        .btn-clear {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-clear:hover {
            background: #d0d0d0;
        }
        
        .content {
            padding: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .problems-container {
            display: grid;
            gap: 20px;
        }
        
        .problem-card {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
        }
        
        .problem-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.1);
        }
        
        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .problem-number {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }
        
        .problem-type {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .problem-badges {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .badge-level {
            background: #2196F3;
            color: white;
        }
        
        .badge-difficulty {
            background: #ff9800;
            color: white;
        }
        
        .badge-easy {
            background: #4caf50;
            color: white;
        }
        
        .badge-medium {
            background: #ff9800;
            color: white;
        }
        
        .badge-hard {
            background: #f44336;
            color: white;
        }
        
        .problem-content {
            font-size: 1.1em;
            line-height: 1.8;
            color: #333;
        }
        
        .function-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            border-left: 4px solid #667eea;
            font-weight: bold;
        }
        
        .problem-questions {
            margin-top: 20px;
        }
        
        .question-item {
            margin-bottom: 12px;
            padding-left: 20px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 2px solid #ddd;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .controls, .button-group, .stats, .footer {
                display: none;
            }
            
            .container {
                box-shadow: none;
            }
            
            .problem-card {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì G√©n√©rateur d'Exercices</h1>
            <p>√âtude de Fonctions - Niveau Baccalaur√©at</p>
        </div>
        
        <div class="controls">
            <div class="control-row">
                <div class="control-group">
                    <label for="problemType">Type d'exercice</label>
                    <select id="problemType">
                        <option value="all">Tous les types</option>
                        <option value="limits">Calcul de limites</option>
                        <option value="continuity">Continuit√©</option>
                        <option value="derivative">D√©rivabilit√©</option>
                        <option value="variations">√âtude de variations</option>
                        <option value="asymptotes">Asymptotes</option>
                        <option value="logarithm">Fonctions logarithmes</option>
                        <option value="exponential">Fonctions exponentielles</option>
                        <option value="rational">Fonctions rationnelles</option>
                        <option value="complete">√âtude compl√®te</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="curriculumLevel">Niveau du programme</label>
                    <select id="curriculumLevel">
                        <option value="all">Tous les niveaux</option>
                        <option value="bac1">Premi√®re / Bac 1</option>
                        <option value="bac2">Terminale / Bac 2</option>
                    </select>
                    <div class="help-text">Selon le programme scolaire</div>
                </div>
                
                <div class="control-group">
                    <label for="difficulty">Difficult√© des questions</label>
                    <select id="difficulty">
                        <option value="all">Toutes difficult√©s</option>
                        <option value="easy">Facile</option>
                        <option value="medium">Moyen</option>
                        <option value="hard">Difficile</option>
                    </select>
                    <div class="help-text">Complexit√© des calculs</div>
                </div>
                
                <div class="control-group">
                    <label for="quantity">Nombre d'exercices</label>
                    <input type="number" id="quantity" min="1" max="50" value="5">
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn-generate" onclick="generateProblems()">
                    ‚ú® G√©n√©rer des exercices
                </button>
                <button class="btn-export" onclick="exportToPDF()">
                    üìÑ Exporter en PDF
                </button>
                <button class="btn-clear" onclick="clearProblems()">
                    üóëÔ∏è Effacer
                </button>
            </div>
        </div>
        
        <div class="content">
            <div class="stats" id="stats" style="display: none;">
                <div class="stat-card">
                    <div class="stat-number" id="totalProblems">0</div>
                    <div class="stat-label">Exercices g√©n√©r√©s</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgDifficulty">-</div>
                    <div class="stat-label">Difficult√© moyenne</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="typeCount">-</div>
                    <div class="stat-label">Types diff√©rents</div>
                </div>
            </div>
            
            <div class="problems-container" id="problemsContainer">
                <div class="empty-state">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <h3>Aucun exercice g√©n√©r√©</h3>
                    <p>Cliquez sur "G√©n√©rer des exercices" pour commencer</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>G√©n√©rateur d'exercices pour l'√©tude de fonctions | Cr√©√© par <strong>Atef Kreidie</strong></p>
        </div>
    </div>

    <script>
        // Problem generation engine with separate curriculum and difficulty
        const problemGenerators = {
            limits: {
                bac1: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            const b = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = ${a}x + ${b}`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                    `Calculer lim<sub>x‚Üí-‚àû</sub> f(x)`
                                ]
                            };
                        },
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = ${a}x¬≤`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (x¬≤ - ${a*a})/(x - ${a})`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí${a}</sub> f(x)`,
                                    `Simplifier f(x) pour x ‚â† ${a}`
                                ]
                            };
                        },
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (${a}x¬≤ + ${b}x)/(x¬≤ + 1)`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                    `Calculer lim<sub>x‚Üí-‚àû</sub> f(x)`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (x¬≥ - ${a}x¬≤ + 1)/(x¬≤ - ${a})`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí‚àö${a}</sub> f(x)`,
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                    `En d√©duire les asymptotes`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    easy: [
                        () => {
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = sin(x)/x`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                    `Que repr√©sente cette limite remarquable ?`
                                ]
                            };
                        },
                        () => {
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (e<sup>x</sup> - 1)/x`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                    `Comparer avec la limite remarquable`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (‚àö(x¬≤ + ${a}x) - x)`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                    `Lever l'ind√©termination en utilisant l'expression conjugu√©e`
                                ]
                            };
                        },
                        () => {
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = x¬∑ln(x)`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí0<sup>+</sup></sub> f(x)`,
                                    `Lever l'ind√©termination`,
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "Calcul de limite - Croissances compar√©es",
                                function: `f(x) = x¬≤¬∑e<sup>-x</sup>`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x)`,
                                    `Appliquer le th√©or√®me des croissances compar√©es`,
                                    `Interpr√©ter le r√©sultat graphiquement`
                                ]
                            };
                        },
                        () => {
                            return {
                                type: "Calcul de limite",
                                function: `f(x) = (1 - cos(x))/x¬≤`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí0</sub> f(x)`,
                                    `Utiliser la limite remarquable et l'identit√© trigonom√©trique`,
                                    `V√©rifier le r√©sultat`
                                ]
                            };
                        }
                    ]
                }
            },
            
            continuity: {
                bac1: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Continuit√©",
                                function: `f(x) = x¬≤ + ${a}`,
                                questions: [
                                    `Montrer que f est continue sur ‚Ñù`,
                                    `Justifier par les th√©or√®mes sur la continuit√©`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Continuit√©",
                                function: `f(x) = |x - ${a}|`,
                                questions: [
                                    `√âtudier la continuit√© de f sur ‚Ñù`,
                                    `f est-elle continue en x = ${a} ?`,
                                    `Justifier la r√©ponse`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Continuit√© par morceaux",
                                function: `f(x) = { x¬≤ si x < ${a}, ax + b si x ‚â• ${a} }`,
                                questions: [
                                    `Pour quelles valeurs de a et b, f est-elle continue en x = ${a} ?`,
                                    `D√©terminer l'ensemble des couples (a, b) solutions`,
                                    `Tracer la courbe pour a = ${a}, b = ${a*a}`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Continuit√©",
                                function: `f(x) = ln(x + ${a})`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition`,
                                    `√âtudier la continuit√© de f sur son domaine`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Continuit√© et TVI",
                                function: `f(x) = x¬≥ - ${a}x - ${a}`,
                                questions: [
                                    `Montrer que f est continue sur ‚Ñù`,
                                    `Calculer f(0) et f(${a+1})`,
                                    `Montrer que l'√©quation f(x) = 0 admet au moins une solution dans ]0, ${a+1}[`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "Continuit√© et fonction compos√©e",
                                function: `f(x) = { x¬∑sin(1/x) si x ‚â† 0, 0 si x = 0 }`,
                                questions: [
                                    `Montrer que f est continue en 0`,
                                    `Utiliser l'encadrement -|x| ‚â§ x¬∑sin(1/x) ‚â§ |x|`,
                                    `Appliquer le th√©or√®me des gendarmes`
                                ]
                            };
                        }
                    ]
                }
            },
            
            derivative: {
                bac1: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            const b = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "D√©riv√©e",
                                function: `f(x) = ${a}x¬≤ + ${b}x`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `Calculer f'(1)`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "D√©riv√©e et tangente",
                                function: `f(x) = ${a}x¬≥ + ${b}x`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `D√©terminer l'√©quation de la tangente au point d'abscisse 0`,
                                    `D√©terminer les points o√π la tangente est horizontale`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "D√©riv√©e - Quotient",
                                function: `f(x) = (x¬≤ + ${a})/(x - ${a})`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition de f`,
                                    `Calculer f'(x)`,
                                    `Simplifier l'expression`,
                                    `√âtudier le signe de f'(x)`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    easy: [
                        () => {
                            return {
                                type: "D√©riv√©e",
                                function: `f(x) = e<sup>x</sup> + x`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `En d√©duire que f est strictement croissante`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "D√©riv√©e - Fonction compos√©e",
                                function: `f(x) = ln(x¬≤ + ${a})`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `Simplifier l'expression`,
                                    `√âtudier le signe de f'(x)`
                                ]
                            };
                        },
                        () => {
                            return {
                                type: "D√©riv√©e - Produit",
                                function: `f(x) = x¬≤¬∑e<sup>-x</sup>`,
                                questions: [
                                    `Calculer f'(x) en utilisant la formule (uv)' = u'v + uv'`,
                                    `Factoriser f'(x)`,
                                    `R√©soudre f'(x) = 0`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "D√©riv√©e - Quotient complexe",
                                function: `f(x) = (x¬≤ + 1)/(x¬≤ - 1)`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition de f`,
                                    `Calculer f'(x) en utilisant la formule (u/v)'`,
                                    `Montrer que f'(x) = -4x/(x¬≤ - 1)¬≤`,
                                    `Dresser le tableau de variations de f`
                                ]
                            };
                        }
                    ]
                }
            },
            
            variations: {
                bac1: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "√âtude de variations",
                                function: `f(x) = -x¬≤ + ${a}x`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `√âtudier le signe de f'(x)`,
                                    `Dresser le tableau de variations`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "√âtude de variations",
                                function: `f(x) = x¬≥ - ${3*a}x`,
                                questions: [
                                    `Calculer f'(x) et factoriser`,
                                    `R√©soudre f'(x) = 0`,
                                    `√âtudier le signe de f'(x)`,
                                    `Dresser le tableau de variations`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "√âtude de variations",
                                function: `f(x) = x‚Å¥ - 4x¬≤ + 3`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `Factoriser f'(x)`,
                                    `R√©soudre f'(x) = 0`,
                                    `Dresser le tableau de variations complet`,
                                    `D√©terminer tous les extremums`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    easy: [
                        () => {
                            return {
                                type: "√âtude de variations",
                                function: `f(x) = x¬∑e<sup>-x</sup>`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `√âtudier le signe de f'(x)`,
                                    `Dresser le tableau de variations`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            return {
                                type: "√âtude de variations",
                                function: `f(x) = x - ln(x) sur ]0, +‚àû[`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `Montrer que f'(x) = (x - 1)/x`,
                                    `√âtudier le signe de f'(x)`,
                                    `Dresser le tableau de variations`,
                                    `En d√©duire que f(x) ‚â• 1 pour tout x > 0`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "√âtude de variations - Fonction auxiliaire",
                                function: `f(x) = x¬≤ - 2x¬∑ln(x) sur ]0, +‚àû[`,
                                questions: [
                                    `Calculer f'(x)`,
                                    `Montrer que f'(x) = 2(x - ln(x) - 1)`,
                                    `Poser g(x) = x - ln(x) - 1 et √©tudier les variations de g`,
                                    `Montrer que g(x) = 0 admet une unique solution Œ± ‚àà ]1, 2[`,
                                    `En d√©duire le signe de f'(x) et dresser le tableau de variations de f`
                                ]
                            };
                        }
                    ]
                }
            },
            
            // Add more problem types with bac1/bac2 structure...
            asymptotes: {
                bac1: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            return {
                                type: "Asymptotes",
                                function: `f(x) = ${a}/x`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition`,
                                    `Calculer les limites aux bornes`,
                                    `D√©terminer les asymptotes`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "Asymptotes",
                                function: `f(x) = x + ${a}/x`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí¬±‚àû</sub> [f(x) - x]`,
                                    `Montrer que y = x est asymptote oblique`,
                                    `√âtudier la position de la courbe par rapport √† l'asymptote`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Asymptotes",
                                function: `f(x) = (x¬≤ + ${a})/(x + ${b})`,
                                questions: [
                                    `D√©terminer les asymptotes verticales`,
                                    `Effectuer la division euclidienne`,
                                    `D√©terminer l'asymptote oblique`,
                                    `√âtudier la position relative`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    easy: [
                        () => {
                            return {
                                type: "Asymptotes",
                                function: `f(x) = e<sup>x</sup>/(e<sup>x</sup> + 1)`,
                                questions: [
                                    `Calculer les limites en ¬±‚àû`,
                                    `D√©terminer les asymptotes horizontales`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            return {
                                type: "Asymptotes",
                                function: `f(x) = x + e<sup>-x</sup>`,
                                questions: [
                                    `Calculer lim<sub>x‚Üí+‚àû</sub> f(x) et lim<sub>x‚Üí-‚àû</sub> f(x)`,
                                    `Montrer que y = x est asymptote en +‚àû`,
                                    `Y a-t-il une asymptote en -‚àû ? Justifier`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "Asymptotes",
                                function: `f(x) = x - ln(x) sur ]0, +‚àû[`,
                                questions: [
                                    `Calculer les limites aux bornes`,
                                    `Montrer que y = x est asymptote oblique en +‚àû`,
                                    `√âtudier la position de (C<sub>f</sub>) par rapport √† (D): y = x`,
                                    `Tracer les asymptotes et la courbe`
                                ]
                            };
                        }
                    ]
                }
            },
            
            logarithm: {
                bac2: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 2;
                            return {
                                type: "Fonction logarithme",
                                function: `√âquation: ln(x) = ${a}`,
                                questions: [
                                    `R√©soudre l'√©quation`,
                                    `Donner la solution exacte`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 2;
                            return {
                                type: "Fonction logarithme",
                                function: `√âquation: ln(x) + ln(x - 1) = ln(${a})`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition`,
                                    `Simplifier en utilisant les propri√©t√©s`,
                                    `R√©soudre l'√©quation`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "√âtude de fonction logarithmique",
                                function: `f(x) = x - 1 - ln(x) sur ]0, +‚àû[`,
                                questions: [
                                    `Calculer les limites aux bornes`,
                                    `Calculer f'(x) et √©tudier son signe`,
                                    `Dresser le tableau de variations`,
                                    `En d√©duire que ‚àÄx > 0, ln(x) ‚â§ x - 1`
                                ]
                            };
                        }
                    ]
                }
            },
            
            exponential: {
                bac2: {
                    easy: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Fonction exponentielle",
                                function: `√âquation: e<sup>x</sup> = ${a}`,
                                questions: [
                                    `R√©soudre l'√©quation`,
                                    `Exprimer la solution avec ln`
                                ]
                            };
                        }
                    ],
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 5) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Fonction exponentielle",
                                function: `√âquation: e<sup>2x</sup> - ${a}e<sup>x</sup> + ${b} = 0`,
                                questions: [
                                    `Poser X = e<sup>x</sup>`,
                                    `R√©soudre l'√©quation du second degr√©`,
                                    `En d√©duire les solutions en x`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "√âtude compl√®te",
                                function: `f(x) = (x¬≤ + 1)¬∑e<sup>-x</sup>`,
                                questions: [
                                    `Calculer les limites en ¬±‚àû`,
                                    `Montrer que f'(x) = -(x - 1)¬≤¬∑e<sup>-x</sup>`,
                                    `Dresser le tableau de variations`,
                                    `Tracer la courbe`
                                ]
                            };
                        }
                    ]
                }
            },
            
            rational: {
                bac1: {
                    medium: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 1;
                            return {
                                type: "Fonction rationnelle",
                                function: `f(x) = (x¬≤ - ${a})/(x + ${a})`,
                                questions: [
                                    `D√©terminer le domaine de d√©finition`,
                                    `Calculer les limites aux bornes`,
                                    `Calculer f'(x)`
                                ]
                            };
                        }
                    ],
                    hard: [
                        () => {
                            return {
                                type: "Fonction homographique",
                                function: `f(x) = (2x + 3)/(x - 1)`,
                                questions: [
                                    `Montrer que f(x) = 2 + 5/(x - 1)`,
                                    `√âtudier les variations de f`,
                                    `D√©terminer les asymptotes`,
                                    `Tracer la courbe`
                                ]
                            };
                        }
                    ]
                },
                bac2: {
                    hard: [
                        () => {
                            return {
                                type: "Bijection et fonction r√©ciproque",
                                function: `f(x) = (2x + 3)/(x - 1)`,
                                questions: [
                                    `Montrer que f est une bijection`,
                                    `D√©terminer la fonction r√©ciproque f<sup>-1</sup>`,
                                    `Tracer (C<sub>f</sub>) et (C<sub>f<sup>-1</sup></sub>)`
                                ]
                            };
                        }
                    ]
                }
            },
            
            complete: {
                bac2: {
                    hard: [
                        () => {
                            const a = Math.floor(Math.random() * 3) + 2;
                            return {
                                type: "√âtude compl√®te",
                                function: `f(x) = x¬≥/(x¬≤ - ${a})`,
                                questions: [
                                    `<b>Partie A</b>: Domaine et limites`,
                                    `<b>Partie B</b>: Asymptotes`,
                                    `<b>Partie C</b>: D√©riv√©e et variations`,
                                    `<b>Partie D</b>: Courbe repr√©sentative`
                                ]
                            };
                        }
                    ]
                }
            }
        };

        let generatedProblems = [];
        let problemCounter = 1;

        function generateProblems() {
            const type = document.getElementById('problemType').value;
            const curriculumLevel = document.getElementById('curriculumLevel').value;
            const difficulty = document.getElementById('difficulty').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            
            generatedProblems = [];
            problemCounter = 1;
            
            for (let i = 0; i < quantity; i++) {
                const problem = generateSingleProblem(type, curriculumLevel, difficulty);
                if (problem) {
                    generatedProblems.push(problem);
                }
            }
            
            displayProblems();
            updateStats();
        }

        function generateSingleProblem(type, curriculumLevel, difficulty) {
            let selectedType = type === 'all' ? getRandomType() : type;
            let selectedLevel = curriculumLevel === 'all' ? getRandomLevel() : curriculumLevel;
            let selectedDifficulty = difficulty === 'all' ? getRandomDifficulty() : difficulty;
            
            // Try to get generator for selected combination
            const generators = problemGenerators[selectedType];
            if (!generators) return null;
            
            let levelGenerators = generators[selectedLevel];
            if (!levelGenerators) {
                // Fallback to other level
                selectedLevel = selectedLevel === 'bac1' ? 'bac2' : 'bac1';
                levelGenerators = generators[selectedLevel];
            }
            if (!levelGenerators) return null;
            
            let difficultyGenerators = levelGenerators[selectedDifficulty];
            if (!difficultyGenerators || difficultyGenerators.length === 0) {
                // Fallback to medium difficulty
                difficultyGenerators = levelGenerators['medium'] || levelGenerators['easy'] || levelGenerators['hard'];
            }
            if (!difficultyGenerators || difficultyGenerators.length === 0) return null;
            
            const generator = difficultyGenerators[Math.floor(Math.random() * difficultyGenerators.length)];
            const problemData = generator();
            
            return {
                number: problemCounter++,
                type: problemData.type,
                level: selectedLevel,
                difficulty: selectedDifficulty,
                function: problemData.function,
                questions: problemData.questions
            };
        }

        function getRandomType() {
            const types = Object.keys(problemGenerators);
            return types[Math.floor(Math.random() * types.length)];
        }

        function getRandomLevel() {
            return Math.random() < 0.5 ? 'bac1' : 'bac2';
        }

        function getRandomDifficulty() {
            const difficulties = ['easy', 'medium', 'hard'];
            const weights = [0.3, 0.5, 0.2];
            const random = Math.random();
            let sum = 0;
            for (let i = 0; i < weights.length; i++) {
                sum += weights[i];
                if (random < sum) return difficulties[i];
            }
            return 'medium';
        }

        function displayProblems() {
            const container = document.getElementById('problemsContainer');
            
            if (generatedProblems.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <h3>Aucun exercice g√©n√©r√©</h3>
                        <p>Cliquez sur "G√©n√©rer des exercices" pour commencer</p>
                    </div>
                `;
                return;
            }
            
            const levelLabels = {
                'bac1': 'Bac 1',
                'bac2': 'Bac 2'
            };
            
            const difficultyLabels = {
                'easy': 'Facile',
                'medium': 'Moyen',
                'hard': 'Difficile'
            };
            
            const difficultyClasses = {
                'easy': 'badge-easy',
                'medium': 'badge-medium',
                'hard': 'badge-hard'
            };
            
            container.innerHTML = generatedProblems.map(problem => `
                <div class="problem-card">
                    <div class="problem-header">
                        <div class="problem-badges">
                            <span class="problem-number">Exercice ${problem.number}</span>
                            <span class="badge badge-level">${levelLabels[problem.level]}</span>
                            <span class="badge ${difficultyClasses[problem.difficulty]}">
                                ${difficultyLabels[problem.difficulty]}
                            </span>
                        </div>
                        <span class="problem-type">${problem.type}</span>
                    </div>
                    <div class="problem-content">
                        <div class="function-display">${problem.function}</div>
                        <div class="problem-questions">
                            ${problem.questions.map((q, i) => `
                                <div class="question-item"><b>${i + 1})</b> ${q}</div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const statsDiv = document.getElementById('stats');
            
            if (generatedProblems.length === 0) {
                statsDiv.style.display = 'none';
                return;
            }
            
            statsDiv.style.display = 'grid';
            
            document.getElementById('totalProblems').textContent = generatedProblems.length;
            
            const difficultyValues = { easy: 1, medium: 2, hard: 3 };
            const avgDiff = generatedProblems.reduce((sum, p) => sum + difficultyValues[p.difficulty], 0) / generatedProblems.length;
            const avgDiffText = avgDiff < 1.5 ? 'Facile' : avgDiff < 2.5 ? 'Moyen' : 'Difficile';
            document.getElementById('avgDifficulty').textContent = avgDiffText;
            
            const uniqueTypes = new Set(generatedProblems.map(p => p.type));
            document.getElementById('typeCount').textContent = uniqueTypes.size;
        }

        function clearProblems() {
            if (generatedProblems.length === 0) return;
            
            if (confirm('√ätes-vous s√ªr de vouloir effacer tous les exercices g√©n√©r√©s ?')) {
                generatedProblems = [];
                problemCounter = 1;
                displayProblems();
                updateStats();
            }
        }

        function exportToPDF() {
            if (generatedProblems.length === 0) {
                alert('Aucun exercice √† exporter. G√©n√©rez d\'abord des exercices.');
                return;
            }
            
            window.print();
        }

        document.addEventListener('DOMContentLoaded', () => {
            displayProblems();
        });
    </script>
</body>
</html>